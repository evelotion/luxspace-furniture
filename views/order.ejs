<%- include('partials/header') %>

<div class="min-h-screen pt-32 pb-20 bg-[#FDFBF7]">
  <div class="container mx-auto px-6 max-w-4xl">
    <div
      class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-gray-200 pb-6"
    >
      <div>
        <h1 class="text-3xl font-serif text-gray-900 mb-2">My Orders</h1>
        <p class="text-gray-500 text-sm">Track your purchase history.</p>
      </div>
      <a
        href="/"
        class="text-xs font-bold uppercase tracking-widest text-yellow-600 hover:text-yellow-700 mt-4 md:mt-0 transition"
      >
        &larr; Continue Shopping
      </a>
    </div>

    <% if(orders.length === 0) { %>
    <div
      class="text-center py-20 bg-white rounded-3xl shadow-sm border border-gray-100"
    >
      <div class="text-6xl mb-4">üõçÔ∏è</div>
      <h2 class="text-xl font-serif text-gray-900 mb-2">No orders yet</h2>
      <p class="text-gray-400 text-sm mb-6">
        You haven't placed any orders yet.
      </p>
      <a
        href="/"
        class="inline-block bg-gray-900 text-white px-8 py-3 rounded-full text-xs uppercase tracking-widest font-bold hover:bg-yellow-600 transition"
      >
        Start Exploring
      </a>
    </div>
    <% } else { %>

    <div class="space-y-8">
      <% orders.forEach(order => { %>
      <div
        class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition duration-300"
      >
        <div
          class="bg-gray-50 px-6 py-4 flex flex-wrap gap-4 justify-between items-center border-b border-gray-100"
        >
          <div class="flex gap-6 text-xs text-gray-500">
            <div>
              <span
                class="block uppercase tracking-widest font-bold text-gray-400 mb-1"
                >Order ID</span
              >
              <span class="font-mono text-gray-900 font-bold"
                >#<%= order.id %></span
              >
            </div>
            <div>
              <span
                class="block uppercase tracking-widest font-bold text-gray-400 mb-1"
                >Date</span
              >
              <span
                ><%= new Date(order.created_at).toLocaleDateString('id-ID',
                {day: 'numeric', month: 'long', year: 'numeric'}) %></span
              >
            </div>
            <div>
              <span
                class="block uppercase tracking-widest font-bold text-gray-400 mb-1"
                >Total Amount</span
              >
              <span class="font-serif text-gray-900 font-bold"
                >IDR <%= new
                Intl.NumberFormat('id-ID').format(order.total_amount) %></span
              >
            </div>
          </div>

          <div>
            <% if(order.status === 'pending') { %>
            <span
              class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-yellow-100 text-yellow-800 border border-yellow-200"
            >
              <span
                class="w-2 h-2 rounded-full bg-yellow-500 animate-pulse"
              ></span>
              Processing
            </span>
            <% } else if(order.status === 'completed') { %>
            <span
              class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-green-100 text-green-800 border border-green-200"
            >
              <span class="w-2 h-2 rounded-full bg-green-500"></span> Shipped
            </span>
            <% } else { %>
            <span
              class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-red-100 text-red-800 border border-red-200"
            >
              <span class="w-2 h-2 rounded-full bg-red-500"></span> Cancelled
            </span>
            <% } %>
          </div>
        </div>

        <div class="p-6">
          <div class="space-y-4">
            <% order.items.forEach(item => { %>
            <div class="flex items-center gap-4">
              <div
                class="w-16 h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0 border border-gray-200"
              >
                <img
                  src="<%= item.image %>"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="flex-grow">
                <h3 class="text-sm font-bold text-gray-900">
                  <%= item.name %>
                </h3>
                <p class="text-xs text-gray-500 mt-1">
                  IDR <%= new Intl.NumberFormat('id-ID').format(item.price) %>
                  &times; <%= item.qty %>
                </p>
              </div>
              <div class="text-sm font-bold text-gray-900">
                IDR <%= new Intl.NumberFormat('id-ID').format(item.price *
                item.qty) %>
              </div>
            </div>
            <% }) %>
          </div>
        </div>

        <div class="bg-gray-50 px-6 py-3 border-t border-gray-100 text-right">
          <a
            href="#"
            class="text-[10px] uppercase font-bold tracking-widest text-gray-400 hover:text-gray-900 transition"
            >Need Help?</a
          >
        </div>
      </div>
      <% }) %>
    </div>

    <% } %>
  </div>
</div>

<%- include('partials/footer') %>
